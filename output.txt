@startuml
skinparam linetype polyline
hide circle
hide stereotype
hide methods

class **EHDSMedicationPrescriptionBody** {
  |_ validFrom : dateTime [0..1]
  |_ validUntil : dateTime [0..1]
  |_ category : CodeableConcept [0..*]
  |_ statusReason[x] : CodeableConcept [0..1]
  |_ statusReasonText : string [0..1]
  |_ comment : string [0..*]
  |_ prescriptionItem : Base [1..*]
    |_ identifier : Identifier [0..1]
    |_ indication : CodeableConcept [0..*]
    |_ indicationText : string [0..1]
    |_ prescriptionIntent : CodeableConcept [0..1]
    |_ treatmentPeriod : Period [0..1]
    |_ quantityPrescribed : Quantity [0..1]
    |_ preparationInstructions : string [0..1]
    |_ substitution : Base [0..1]
      |_ allowed[x] : boolean [0..1]
      |_ reason[x] : CodeableConcept [0..1]
    |_ status : CodeableConcept [1..1]
    |_ statusReason[x] : CodeableConcept [0..1]
    |_ repeatsAllowed : integer [0..1]
    |_ minimumDispenseInterval : Duration [0..1]
    |_ offLabel : boolean [0..1]
    |_ comment : string [0..*]
}
"**EHDSMedicationPrescriptionBody**" -- "1..1" "**EHDSMedication**" : medication >
"**EHDSMedicationPrescriptionBody**" -- "0..*" "**EHDSDosaging**" : dosageInstructions >

class **EHDSMedication** {
  |_ identifyingCode[x] : CodeableConcept [0..*]
  |_ classification : CodeableConcept [0..*]
  |_ productName : string [0..1]
  |_ marketingAuthorisationHolder : Base [0..1]
    |_ organizationName : string [0..1]
    |_ organizationIdentifier : Identifier [0..*]
  |_ doseForm : CodeableConcept [0..1]
  |_ packSize : Quantity [0..*]
  |_ item : Base [0..*]
    |_ doseForm : CodeableConcept [0..1]
    |_ ingredient : Base [1..*]
      |_ isActive : boolean [0..1]
      |_ substance : CodeableConcept [1..1]
      |_ strengthInfo : Base [0..1]
        |_ strength : Ratio [1..1]
        |_ basisOfStrengthSubstance : CodeableConcept [0..1]
    |_ unitOfPresentation : CodeableConcept [0..1]
    |_ containedQuantity : Ratio [0..1]
    |_ amount : Quantity [0..1]
    |_ packageType : CodeableConcept [0..1]
  |_ device : Base [0..*]
    |_ deviceQuantity : Quantity [1..1]
    |_ device[x] : CodeableConcept [1..1]
  |_ characteristic : Base [0..*]
    |_ type : CodeableConcept [1..1]
    |_ value[x] : boolean [0..1]
  |_ batch : Base [0..1]
    |_ lotNumber : string [0..1]
    |_ expirationDate : dateTime [0..1]
}

class **EHDSDosaging** {
  |_ sequence : integer [0..1]
  |_ text : string [0..1]
  |_ additionalInstruction : CodeableConcept [0..*]
  |_ patientInstruction : string [0..1]
  |_ doseAndRate : Base [0..*]
    |_ type : CodeableConcept [0..1]
    |_ dose[x] : Quantity [0..1]
    |_ rate[x] : Ratio [0..1]
  |_ timing : Base [0..1]
    |_ event : dateTime [0..*]
    |_ code : CodeableConcept [0..1]
    |_ repeat : Base [0..1]
      |_ bounds : Base [0..1]
        |_ duration : Quantity [0..1]
        |_ range : Range [0..1]
        |_ period : Period [0..1]
      |_ count : Base [0..1]
        |_ count : integer [0..1]
        |_ countMax : integer [0..1]
      |_ duration : Base [0..1]
        |_ duration : Quantity [0..1]
        |_ durationMax : Quantity [0..1]
      |_ frequency : Base [0..1]
        |_ numberOfTimes : integer [0..1]
        |_ maxNumberOfTimes : integer [0..1]
        |_ period : Quantity [0..1]
        |_ periodMax : Quantity [0..1]
      |_ dayOfWeek : CodeableConcept [0..*]
      |_ timeOfDay : time [0..*]
      |_ eventTime : Base [0..*]
        |_ when : CodeableConcept [0..*]
        |_ offset : integer [0..1]
  |_ asNeeded : boolean [0..1]
  |_ asNeededFor : CodeableConcept [0..*]
  |_ bodySite : CodeableConcept [0..1]
  |_ routeOfAdministration : CodeableConcept [0..1]
  |_ methodOfAdministration : CodeableConcept [0..1]
  |_ maxDose : Base [0..*]
    |_ maxDosePerPeriod : Ratio [0..*]
    |_ maxDosePerAdministration : Quantity [0..1]
    |_ maxDosePerLifetime : Quantity [0..1]
}

@enduml
